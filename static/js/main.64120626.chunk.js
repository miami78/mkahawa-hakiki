(this["webpackJsonprestaurant-review"]=this["webpackJsonprestaurant-review"]||[]).push([[0],{17:function(e){e.exports=JSON.parse('[{"restaurantName":"Mama Ashanti","address":"Muthangari Gardens, Nairobi","location":{"lat":-1.2830004,"lng":36.7699554},"rating":5,"reviews":[{"author_name":"Random Name","rating":5,"text":"Please to experience Western African dishes. Live music, friendly stuffs. Ambience! Awesome children playing area."},{"author_name":"Random Name","rating":5,"text":"The place has a beautiful gardenic setting with great and marvellous service. And the food....wow wow wow! "}],"photo":"https://www.google.com/logos/doodles/2020/celebrating-mekatilili-wa-menza-6753651837108405-2x.png"},{"restaurantName":"Burger King","address":"Jacaranda Ave, Nairobi","location":{"lat":-1.2855332,"lng":36.7691845},"rating":4,"reviews":[{"author_name":"Random Name","rating":5,"text":"Good food"},{"author_name":"Random Name","rating":3,"text":"Meh, it was fine."}],"photo":"https://www.google.com/logos/doodles/2020/celebrating-mekatilili-wa-menza-6753651837108405-2x.png"},{"restaurantName":"Cheka Japanese Izakaya","address":"Mageta Rd, Nairobi","location":{"lat":-1.2868786,"lng":36.7692029},"rating":4,"reviews":[{"author_name":"Random Name","rating":3,"text":"Food is amazing. Excellent. Delicious. Just be aware that the table food won\'t come out at the same time."},{"author_name":"Random Name","rating":5,"text":"Authentic Japanese experience.  Last time I was there we chose to go to the little area where you need to take off your shoes and sit on the floor - I just wanted to get an idea of how that would feel and I\'m glad to say that I enjoyed it immensely.  "}],"photo":"https://www.google.com/logos/doodles/2020/celebrating-mekatilili-wa-menza-6753651837108405-2x.png"},{"restaurantName":"La Salumeria Restaurant","address":"Korosho Rd, Nairobi","location":{"lat":-1.2889698,"lng":36.7700101},"rating":3,"reviews":[{"author_name":"Random Name","rating":4,"text":"One of the best waiters in Nairobi! Great and professional service! Older gentleman who wears spectacles. Really knows his food and wine. I didn\'t enjoy my beef canelloni because the meat was more like sausage meat as opposed to a beef"},{"author_name":"Random Name","rating":2,"text":"Very decent Italian food. Service rather slow, but friendly when they get to you"}],"photo":"https://www.google.com/logos/doodles/2020/celebrating-mekatilili-wa-menza-6753651837108405-2x.png"},{"restaurantName":"Pizza Inn-Valley Arcade","address":"Gitanga Rd, Nairobi","location":{"lat":-1.2899279,"lng":36.77266},"rating":2,"reviews":[{"author_name":"Random Name","rating":3,"text":" Perhaps not the best but decent for fast-food."},{"author_name":"Random Name","rating":1,"text":" I\'m never ordering from Pizza Inn again. I\'ll use Debonairs Pizza instead."}],"photo":"https://www.google.com/logos/doodles/2020/celebrating-mekatilili-wa-menza-6753651837108405-2x.png"},{"restaurantName":"Sushi Soo Japanese Restaurant","address":"Oloitoktok Rd, Nairobi","location":{"lat":-1.2902054,"lng":36.7748425},"rating":4.5,"reviews":[{"author_name":"Random Name","rating":4,"text":"Bulgogi and fried chicken were delicious but little bit salty for me. There was playground for kids so my son enjoyed. "},{"author_name":"Random Name","rating":5,"text":"Awesome food, great service, and perfect ambiance. Location is also easy to get to."}],"photo":"https://www.google.com/logos/doodles/2020/celebrating-mekatilili-wa-menza-6753651837108405-2x.png"}]')},30:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAiEAAAIhAENVwL6AAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAVNQTFRF////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAADAAADAAADAAADAAADAAADAAADAAADAAADAAACAAACAAACAAACAAACAAACAAACAAACAAACAAACAAACAgACAgACAgACAgACAgACAgACAgACAgACAgACAgACAgACAgACAgACAgACAgACAgACAgACAQABAQABAQABAQABAQABAQABAQABAQABAQABAQADAQADAQADAQADAQADAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACAQACRJgJrwAAAHB0Uk5TAAECAwUGBwgJCw4REhMUGBsdHh8iIyQnKCkrLS8zNjc6PD9ASUpLUVJYWVxkZ2ltcXN3eXp7fn+Bg4WLj5KTlZiZnZ6fpKWmqquusbK4ubq8vcjJysvMz9TW2Nzd3t/m6Ovs7vDz9PX3+Pn6+/z9/sZCdMoAAAGSSURBVBgZfcH7OxpgAIbhp3WiaMSGttQMhdXYRiMbWZmw2sya2oG1tJbo/f9/2nd1tQ4q9w1t7sXY8fn5cWzRTV9LRUmlkqTiEr08adUSK1MWy9RKoqa0h1vGL3Tmp8l/potxumW046DFsaMMXSI6sdLBeqIIHSYuK9MYtvDWVtiGMV25nKBtVRsYM+nQ6GgoPYOxoVXa9jULDB0MYwwfDAGz2qetcOUA1vw0+NcAx1WBFlc9h7FL0y5Gru7iP6+yGAmaEhhZPaDldxEjPkLDSByjeG2j5ZMmAd82Dds+YFI/aYtrGSO6aQf7ZhRjWSnagvW8EyOwl0zuBTCceQXo8E5xusT1mU6e4s0cHeZuFKbLM1XXrTRZ16v6QDfLF+k0aMOwBU+lvw+5JViXVM0lErmqjNf0SCmXrcm4ziT13UmPsXJ5zPV4Yf6Ry17QAn280nsaXuqQfhw/9ATD+6fspa+Qvt4DDvWCAT4qAvPK2xjAV/vldnzTUwZ6o7cxpRjMXbyulO5zh6j0nLtYj46sdPkH9BJP6No4wpIAAAAASUVORK5CYII="},39:function(e,t,a){e.exports=a.p+"static/media/placeholder.78013d80.png"},50:function(e,t,a){e.exports=a(81)},55:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(7),s=a.n(o),i=(a(55),a(2)),l=a(3),c=a(4),A=a(5),u=(a(56),a(57),function(){return r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"logo-container"},r.a.createElement("h1",null,"MH")))}),m=a(24),d={width:"76%",height:"690px",position:"absolute",filter:"brightness(90%)"},p=function(e){Object(A.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).onScriptLoad=n.onScriptLoad.bind(Object(m.a)(n)),n}return Object(l.a)(a,[{key:"onScriptLoad",value:function(){var e=this,t=new window.google.maps.Map(document.getElementById(this.props.id),this.props.options);this.props.onMapLoad(t),t.addListener("click",(function(a){e.props.onClick(a,t)})),t.addListener("idle",(function(){e.props.updateBounds(t)}))}},{key:"componentDidMount",value:function(){var e=this;if(window.google)this.onScriptLoad();else{var t=document.createElement("script");t.type="text/javascript",t.src="https://maps.google.com/maps/api/js?key=AIzaSyBm9cO3EPjJixfbhSvmjSaIArx5Ew0uFNU&libraries=places";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(t,a),t.addEventListener("load",(function(t){e.onScriptLoad()}))}}},{key:"render",value:function(){return r.a.createElement("div",{style:d,id:this.props.id})}}]),a}(r.a.Component),g=(a(58),function(e){Object(A.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleNameChange=function(e){n.setState({RestaurantName:e.target.value})},n.handleRatingChange=function(e){var t=parseInt(e.target.value);n.setState({rating:t})},n.handleSubmit=function(e){e.preventDefault(),n.props.onRestSubmit(n.state.RestaurantName,n.state.rating),console.log(n.state.rating),console.log(n.state.RestaurantName)},n.state={RestaurantName:"",rating:3},n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("form",{className:"form-container",onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",placeholder:"Restaurant Name",required:!0,onChange:this.handleNameChange}),r.a.createElement("input",{type:"number",min:"1",max:"5",placeholder:"Rating",required:!0,onChange:this.handleRatingChange}),r.a.createElement("button",null,"SUBMIT"))}}]),a}(r.a.Component)),h=a(30),w=a.n(h),v=a(39),f=a.n(v),b=a(17),C=function(e){Object(A.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).fetchPlaces=function(e){var t={location:e,type:["restaurant"],radius:200};new window.google.maps.places.PlacesService(n.state.map).nearbySearch(t,n.restaurantsDetails)},n.restaurantsDetails=function(e,t){var a,r=[];b.forEach((function(e){var t=new window.google.maps.Marker({position:e.location,map:n.state.map,title:e.restaurantName});r.push(t)})),console.log(r),t===window.google.maps.places.PlacesServiceStatus.OK?(e.forEach((function(e){var t=new window.google.maps.Marker({position:e.geometry.location,map:n.state.map,title:e.name});r.push(t)})),console.log(r),n.setState({storedApiMarkers:r}),a=e.map((function(e){var t,a,n,r,o;return e.rating?(t=e.rating,a=e.user_ratings_total):(t=0,a=0),n=!!e.opening_hours&&e.opening_hours.isOpen,r=e.price_level?e.price_level:0,o=e.photos?e.photos[0].getUrl():f.a,{restaurantName:e.name,id:e.place_id,lat:e.geometry.location.lat(),lng:e.geometry.location.lng(),address:e.vicinity,avgRating:t,totalRatings:a,price:r,openNow:n,photo:o}})),n.setState({restaurants:a})):(a=[],n.setState({restaurants:a})),n.props.onDataReceived(n.state.restaurants)},n.createRestaurantFromFormData=function(e,t){new window.google.maps.Marker({position:n.state.restPos,map:n.state.map,title:"restaurant location",icon:w.a});var a=n.state.newRestaurants;a.push({restaurantName:e,rating:t}),n.setState({newRestaurants:a}),n.props.onNewRestData(a),n.handleClose()},n.handleClose=function(){n.setState({showForm:!1})},n.state={userPosition:{lat:-1.328635,lng:31.7951872},restPos:{lat:-1.328635,lng:31.7951872},map:null,restaurants:[],newRestaurants:[],storedApiMarkers:[],isMapClicked:!1,lat:"",lng:"",showForm:!1},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getUserPosition()}},{key:"componentDidUpdate",value:function(){this.getUserPosition()}},{key:"getUserPosition",value:function(){var e=this;navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){e.setState({userPosition:{lat:t.coords.latitude,lng:t.coords.longitude}})})):alert("Geolocation not available")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(p,{id:"myMap",options:{center:this.state.userPosition,zoom:15},onMapLoad:function(t){new window.google.maps.Marker({position:e.state.userPosition,map:t,title:"user location",icon:w.a});e.setState({map:t}),e.props.onMapLoaded(t)},updateBounds:function(t){for(;e.state.storedApiMarkers.length;)e.state.storedApiMarkers.pop().setMap(null);e.setState({storedApiMarkers:[]}),e.fetchPlaces(t.getCenter())},onClick:function(t){var a=t.latLng.lat(),n=t.latLng.lng();e.setState({restPos:{lat:a,lng:n}}),e.setState({showForm:!0})}}),this.state.showForm&&r.a.createElement("div",null,r.a.createElement(g,{onRestSubmit:this.createRestaurantFromFormData})))}}]),a}(r.a.Component),R=(a(33),a(82)),E=(a(59),function(e){Object(A.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState({minRating:e}),n.props.handleFilterChange(e),console.log(e)},n.state={minRating:1},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"review-card"},r.a.createElement("h3",null,"Filter by rating :"),r.a.createElement(R.a,{allowHalf:!0,onChange:function(t){return e.handleChange(t)},value:this.state.minRating}))}}]),a}(r.a.Component)),N=(a(77),function(e){Object(A.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleNameChange=function(e){n.setState({reviewerName:e.target.value})},n.handleReviewChange=function(e){n.setState({review:e.target.value})},n.handleRatingChange=function(e){var t=parseInt(e.target.value);n.setState({rating:t})},n.handleSubmit=function(e){e.preventDefault(),n.props.onReviewSubmit(n.state.reviewerName,n.state.rating,n.state.review),console.log(n.state.rating),console.log(n.state.review),console.log(n.state.reviewerName)},n.state={reviewerName:"",review:"",rating:3},n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("form",{className:"form-container",onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",placeholder:"Reviewer Name",required:!0,onChange:this.handleNameChange}),r.a.createElement("input",{type:"text",placeholder:"Review",required:!0,onChange:this.handleReviewChange}),r.a.createElement("input",{type:"number",min:"1",max:"5",placeholder:"Rating",required:!0,onChange:this.handleRatingChange}),r.a.createElement("button",null,"SUBMIT"))}}]),a}(r.a.Component)),y=(a(78),function(e){Object(A.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).closeCard=function(){n.setState({showMore:!1})},n.handleClick=function(){if(!1===n.state.showMore)if(n.setState({showMore:!0}),!0===n.props.isGoogle){var e={placeId:n.props.id,fields:["name","rating","business_status","opening_hours","reviews"]};new window.google.maps.places.PlacesService(n.props.mapObject).getDetails(e,(function(e,t){if(t===window.google.maps.places.PlacesServiceStatus.OK)return console.log("places service OK"),console.log(e),n.setState({restaurant:e}),{name:e.name,rating:e.rating,reviews:e.review}}))}else n.setState({isGoogle:!1,showMore:!0}),console.log(n.props.isGoogle),console.log(n.props.reviews);else n.setState({showMore:!1})},n.handleAddReview=function(){n.setState({showForm:!0})},n.handleClose=function(){n.setState({showForm:!1})},n.addReviewFromFormData=function(e,t,a){n.state.newReview.push({reviewerName:e,rating:t,review:a}),n.setState({addReview:!0}),n.handleClose(),console.log(n.state.newReview)},n.state={showMore:!1,restaurant:{name:"",rating:1,reviews:[],business_status:"",opening_hours:{weekday_text:["NOT AVAILABLE"]}},showForm:!1,newReview:[],addReview:!1},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=!this.state.restaurant.reviews,a=!this.state.restaurant.opening_hours;return r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"section-header"},r.a.createElement("h3",null,this.props.restaurantName)),r.a.createElement("div",{className:"section-ratings"},r.a.createElement("p",null,"(",this.props.totalRatings||this.props.rating,")"),r.a.createElement("span",null,r.a.createElement(R.a,{allowHalf:!0,disabled:!0,value:this.props.rating}))),r.a.createElement("div",{className:"section-details"},r.a.createElement("img",{alt:"restaurant",src:this.props.photo}),r.a.createElement("p",null,this.props.address),r.a.createElement("p",null,this.props.openNow)),r.a.createElement("div",{className:"custom-buttons"},r.a.createElement("button",{className:"add-review",onClick:function(){return e.handleAddReview()}},"Add Review"),this.state.showForm&&r.a.createElement("div",null,r.a.createElement(N,{onReviewSubmit:this.addReviewFromFormData}))),t&&a?r.a.createElement("div",null,r.a.createElement("h2",null,"No data available")):t?r.a.createElement("div",{className:"open-hours"},r.a.createElement("h2",null,"No review available"),r.a.createElement("h3",null,"Opening hours"),e.state.restaurant.opening_hours.weekday_text.map((function(e,t){return r.a.createElement("p",{key:t},r.a.createElement("br",null),e)}))):!1===e.state.isGoogle&&!0===e.state.showMore?r.a.createElement("div",{className:"section-details-review"},e.props.reviews.map((function(e,t){return r.a.createElement("div",{className:"review-text",key:t},r.a.createElement("h2",null,e.author_name),r.a.createElement("span",null,r.a.createElement(R.a,{disabled:!0,value:e.rating})),r.a.createElement("p",null,e.text),r.a.createElement("div",{className:"border-bottom"}))}))):!1===e.state.isGoogle&&!0===e.state.addReview&&!1===e.state.showMore?r.a.createElement("div",{className:"section-details-review"},e.state.newReview.map((function(e,t){return r.a.createElement("div",{className:"review-text",key:t},r.a.createElement("h2",null,e.reviewerName),r.a.createElement("span",null,r.a.createElement(R.a,{disabled:!0,value:e.rating})),r.a.createElement("p",null,e.review),r.a.createElement("div",{className:"border-bottom"}))}))):r.a.createElement("div",{className:"section-details-review"},e.state.restaurant.reviews.map((function(e,t){return r.a.createElement("div",{className:"review-text",key:t},r.a.createElement("img",{alt:"author",src:e.profile_photo_url}),r.a.createElement("h2",null,e.author_name),r.a.createElement("span",null,r.a.createElement(R.a,{disabled:!0,value:e.rating})),r.a.createElement("p",null,e.text),r.a.createElement("div",{className:"border-bottom"}))}))),r.a.createElement("div",{className:"right-arrow"},r.a.createElement("button",{className:"right",onClick:function(){return e.handleClick()}},!!this.state.showMore,r.a.createElement("i",{className:"fas fa-angle-down"}))))}}]),a}(r.a.Component)),S=(a(79),function(e){Object(A.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={restaurants:[],map:null},n}return Object(l.a)(a,[{key:"render",value:function(){for(var e=this,t=[],a=0;a<this.props.gRestaurantData.length;a++)this.props.gRestaurantData[a].avgRating>=this.props.rating&&t.push(this.props.gRestaurantData[a]);for(var n=[],o=0;o<b.length;o++)b[o].rating>=this.props.rating&&n.push(b[o]);for(var s=[],i=0;i<this.props.newRestaurants.length;i++)this.props.newRestaurants[i].rating>=this.props.rating&&s.push(this.props.newRestaurants[i]);return r.a.createElement("div",{className:"restaurant-list"},s.map((function(e,t){return r.a.createElement(y,{key:t,isGoogle:!1,rating:e.rating,restaurantName:e.restaurantName,address:"",photo:"",reviews:[]})})),t.map((function(t,a){return r.a.createElement(y,{key:a,mapObject:e.props.mapObject,isGoogle:!0,id:t.id,restaurantName:t.restaurantName,rating:t.avgRating,address:t.address,photo:t.photo,openNow:t.openNow,totalRatings:t.totalRatings,lat:t.lat,lng:t.lng})})),n.map((function(e,t){return r.a.createElement(y,{key:t,isGoogle:!1,rating:e.rating,restaurantName:e.restaurantName,address:e.address,photo:e.photo,reviews:e.reviews,lat:e.location.lat,lng:e.location.lng})})))}}]),a}(r.a.Component)),j=(a(80),function(e){Object(A.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleFilterChange=function(e){n.setState({filteredRating:e})},n.state={filteredRating:1},n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"restaurant-card",id:this.props.id},r.a.createElement(E,{handleFilterChange:this.handleFilterChange}),r.a.createElement(S,{rating:this.state.filteredRating,gRestaurantData:this.props.gRestaurantData,mapObject:this.props.mapObject,newRestaurants:this.props.newRestaurants}))}}]),a}(r.a.Component)),k=function(e){Object(A.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).fetchRestaurantData=function(e){n.setState({restaurants:e})},n.fetchMapObject=function(e){n.setState({map:e})},n.fetchNewRestaurantData=function(e){n.setState({newRestaurantDAta:e}),console.log(e)},n.state={restaurants:[],newRestaurantDAta:[],map:null},n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(u,null),r.a.createElement(C,{onMapLoaded:this.fetchMapObject,onDataReceived:this.fetchRestaurantData,onNewRestData:this.fetchNewRestaurantData}),r.a.createElement(j,{id:"streetview",mapObject:this.state.map,gRestaurantData:this.state.restaurants,newRestaurants:this.state.newRestaurantDAta}))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[50,1,2]]]);
//# sourceMappingURL=main.64120626.chunk.js.map